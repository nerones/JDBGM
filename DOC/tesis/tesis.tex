\documentclass[letter,fleqn,twoside]{book}
\usepackage{graphicx,amsmath,amsfonts,psfrag,fancyhdr,layout,appendix,subfig,xspace}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{listings}
\usepackage{makeidx}
%\usepackage{ucs}
%\usepackage[utf8]{inputenc}
%\usepackage[T2A]{fontenc} %PROBANDO para RUSO
\usepackage[numbers]{natbib}
%\usepackage{hypernat} CAUSA PROBLEMAS AL COMPILAR - PROBLEMAS DE MUY DIFICIL LOCALIZACIÓN

%Para bibliogafía por capítulos con BibTeX
%\usepackage[sectionbib]{natbib}
%\usepackage{chapterbib}

%This change labels of subfig
\renewcommand{\thesubfigure}{\alph{subfigure}\arabic{subfiggroup}}
\captionsetup[subfigure]{labelformat=simple,labelsep=colon, listofformat=subsimple}
%\captionsetup{lofdepth=2} This is in order to list the subfigures in the LOF
\makeatletter
 \renewcommand{\p@subfigure}{}
  %Esto lo agrego yo para tener subfiguras a1, b1, ... a2, b2, ... 
  %Se reinicia cada vez que una nueva figura es convocada (como es debido).
  \newcounter{subfiggroup}[figure] 
\makeatother


\usepackage{epsfig}
\usepackage{url}

%--------------------comandos para abreviar nombres---------------------

\newcommand{\s}{\textit{SQLite}\xspace}
\newcommand{\m}{\textit{MySQL}\xspace}
\newcommand{\p}{\textit{PostgreSQL}\xspace}
\newcommand{\cc}{\textit{crossdb}\xspace}
\newcommand{\jj}{\textit{JDBGM}\xspace}
\newcommand{\dd}{\textit{DBMS}\xspace}


\newcommand{\figpage}[1]{Figura~\ref*{#1} en la pagina~\pageref*{#1}}
\newcommand{\fullref}[1]{\ref{#1} de la página \pageref{#1}}

%--------------------Fin comandos para abreviar nombres---------------------

%Esto genera enlaces en el PDF
% \usepackage{html}
%Esto es para el conversor latex2html
\usepackage{color}
%\pagecolor{white}
\definecolor{lightgray}{rgb}{0.83,0.83,0.83}
\definecolor{darkgray1}{gray}{0.98}
\definecolor{darkgray}{gray}{0.40}
%Este mejora las prestaciones de "\verbatim"
%\usepackage{verbatim}
\usepackage{fancyvrb}
\fvset{gobble=2, frame=leftline, framesep=3mm, fontsize=\small, formatcom=\color{darkgray}}

\lstset{frame=shadowbox, rulesepcolor=\color{lightgray}, backgroundcolor=\color{darkgray1}, language=Java, numbers=left, numberstyle=\tiny, basicstyle=\footnotesize, xleftmargin= 
14pt}
%Definición de margenes
\usepackage[left=4.5cm,top=2.8cm,right=2cm,bottom=2.5cm]{geometry}
\sloppy
\pagestyle{empty}

% Code for creating empty pages
% No headers on empty pages before new chapter
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \hbox{}
    \thispagestyle{plain}
    \newpage
    \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother \clearpage{\pagestyle{plain}\cleardoublepage}

% Code for creating fully-empty pages
% Fully empty pages before command is called
\makeatletter
\def\clearfullypage{\clearpage\if@twoside \ifodd\c@page\else
    \hbox{}
    \thispagestyle{empty}
    \newpage
    \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother \clearpage{\pagestyle{empty}\clearfullypage}

% Dutch style of paragraph formatting, i.e. no indents.
\setlength{\parskip}{1.3ex plus 0.2ex minus 0.2ex}
\setlength{\parindent}{0pt}

%\includeonly{edicion}
%\includeonly{jurado,apoyo,licencia,edicion,reconocimientos,tvs}

% Double space for REVISION
%\renewcommand{\baselinestretch}{2.0}

%Print subsubsection numbers and put them in TOC
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\makeindex

%Esto no dió resultado, se deseaba pasar 0.0 -> 0.0 y no -> 0,0
%Cambia el signo decimal a punto (en lugar del predeterminado: coma)
%\DeclareMathSymbol{.}{\mathpunct}{letters}{"3B}
%\DeclareMathSymbol{,}{\mathord}{letters}{"3B}
%\DeclareMathSymbol{\decimal}{\mathord}{letters}{"3A}

\usepackage[colorlinks=true, linkcolor= black ]{hyperref}

\begin{document}
%Cambiar Cuadros por Tablas y lista de... Debe ir después de \begin{document}
\renewcommand{\listtablename}{Índice de tablas} 
\renewcommand{\tablename}{Tabla} 


%%%%%%%%%%%%%
\frontmatter
%%%%%%%%%%%%%
%\ input{portada} %Se compila aparte y se junta con "gs".
%gs -dNOPAUSE -sDEVICE=pdfwrite -sOUTPUTFILE=tesiscompleta.pdf -dBATCH portada.pdf tesis.pdf
\pagestyle{empty}
%\ include{jurado}
\clearfullypage
\pagenumbering{roman}
%\ include{apoyo}
%\ input{licencia}
%\ include{edicion}
%\clearfullypage
%\ include{reconocimientos}
%\ include{russian}

% Define pagestyle
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{ \emph{#1}}{}}
\fancyhead[LO]{}
\fancyhead[LO]{}
\fancyfoot[LE,RO]{\thepage}

% Redefine plain page style
\fancypagestyle{plain}{
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[LE,RO]{\thepage}
}

% Dutch style of paragraph formatting, i.e. no indents.
\setlength{\parskip}{1.3ex plus 0.2ex minus 0.2ex}


% Remove parskip for toc
\setlength{\parskip}{0ex plus 0.5ex minus 0.2ex}

\tableofcontents
\listoffigures
\listoftables

%\cleardoublepage
%\ include{resumen} 
\cleardoublepage
%\ include{resumenen} 
% Adjustments headers
\fancyhead[RO]{\leftmark}

%%%%%%%%%%%%%
\mainmatter
%%%%%%%%%%%%%
\pagenumbering{arabic}
% Adjustments headers
\fancyhead[RO]{\leftmark}
\fancyhead[EL]{\emph{Capítulo \thechapter}}
%\setcounter{page}{3}

\include{introduccion}
\include{antecedentes}
\include{jdbgm}
\include{especificacion}
\include{disenio}
\include{implementacion}
\include{conclusiones}
\include{trabajofuturo}
%\ include{designsvt}
%\ include{lira}
%\ include{pcnc}
%\ include{exp}
%\ include{conclusion}
%\ include{futuro}

\part*{\addcontentsline{toc}{part}{Apéndices}Apéndices}

% Adjustments headers
\fancyhead[RO]{\leftmark}
\fancyhead[EL]{\emph{Apéndice \thechapter}}

%%%%%%%%%%%%%
\appendix
%%%%%%%%%%%%%%
%\ include{software}
%\ include{publicaciones}
\include{ejemplo}

%%%%%%%%%%%%%
\backmatter
%%%%%%%%%%%%%
% Adjustments headers
\fancyhead[RO]{\leftmark}
\fancyhead[EL]{}
\addcontentsline{toc}{chapter}{Bibliografía}
\bibliographystyle{plain}
\bibliography{biblio.bib}
%\printindex
\end{document}



%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "tesis"
%%% End: 
